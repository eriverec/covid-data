<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <title>Document</title>
    <style>
      #csv-display {
        overflow: auto;
        white-space: nowrap;
      }
    </style>
  </head>
  <body>
    <h3>Header</h3>

    <div id="csv-display"></div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>
    <script>
      var data;
      $.ajax({
        type: "GET",
        url: "ecuacovid-hospitalizadas_por_dia.csv",
        dataType: "text",
        success: function (response) {
          data = $.csv.toArrays(response);
          generateHtmlTable(data);
        },
      });

      function generateHtmlTable(data) {
        var html =
          '<table  class="table table-condensed table-hover table-striped">';

        if (typeof data[0] === "undefined") {
          return null;
        } else {
          $.each(data, function (index, row) {
            //bind header
            if (index == 0) {
              html += "<thead>";
              html += "<tr>";
              $.each(row, function (index, colData) {
                html += "<th>";
                html += colData;
                html += "</th>";
              });
              html += "</tr>";
              html += "</thead>";
              html += "<tbody>";
            } else {
              html += "<tr>";
              $.each(row, function (index, colData) {
                html += "<td>";
                html += colData;
                html += "</td>";
              });
              html += "</tr>";
            }
          });
          html += "</tbody>";
          html += "</table>";

          $("#csv-display").append(html);
        }
      }
    </script>
  </body>
</html>
